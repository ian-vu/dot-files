#! /usr/bin/expect

spawn saml2aws --provider KeyCloak --profile="amp" login
expect "Hostname"
send "id.sdpamp.com/auth/realms/amp/protocol/saml/clients/amazon-aws\n"

expect "Username"
send "d847760\n"
expect "Password"
# grab the password
stty -echo
expect_user -re "(.*)\n"
send_user "\n"
stty echo
set pass $expect_out(1,string)

send -- "$pass\r"
interact
