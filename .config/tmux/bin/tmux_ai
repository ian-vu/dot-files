#!/bin/bash

# This script helps with pane toggling of panes with AI agents.
# The aim is to have the agent running on the right pane.

# Set the process name to look for - currently claude cli runs under "node"
ai_process="node"
ai_process_command="$HOME/.claude/local/claude"
current_command=$(tmux display-message -p "#{pane_current_command}")
ai_pane=$(tmux list-panes -F "#{pane_id} #{pane_current_command}" | grep -m1 "${ai_process}$" | cut -d" " -f1)

# Case 1: No AI process running - split and start claude
if [ -z "$ai_pane" ]; then
  # tmux split-window -h "$ai_process_command"
  tmux split-window -h "$ai_process_command"

# Case 2: Currently in AI process pane - swap to right pane and maximize effective hiding AI
elif [[ "$current_command" == "$ai_process" ]]; then
  tmux select-pane -L
  tmux resize-pane -Z

# Case 3: AI process is running but current pane isn't AI process - switch to it
else
  tmux select-pane -R
fi
